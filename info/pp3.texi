% -*-texinfo-*-
\def\niceracronym#1{#1}
%\def\rmdefault{ppl}\def\ne{\mathrel{\not{}\mskip-8mu=}}\input pstexinfo
\input texinfo
@let@acronym@niceracronym

@c 	$Id$	

@c======================================================================@>
@c    pp3.texi - Part of the PP3 Program                                @>
@c    Copyright 2002, 2003 Torsten Bronger                              @>
@c                         <bronger@users.sourceforge.net>              @>
@c                                                                      @>
@c  This program may be distributed and/or modified under the           @>
@c  conditions of the MIT licence with the following constraint:        @>
@c  If you copy or distribute a modified version of this Software, the  @>
@c  entire resulting derived work must be given a different name and    @>
@c  distributed under the terms of a permission notice identical to     @>
@c  this one.                                                           @>
@c                                                                      @>
@c  Permission is hereby granted, free of charge, to any person         @>
@c  obtaining a copy of this software and associated documentation      @>
@c  files (the ``Software''), to deal in the Software without           @>
@c  restriction, including without limitation the rights to use, copy,  @>
@c  modify, merge, publish, distribute, sublicense, and/or sell copies  @>
@c  of the Software, and to permit persons to whom the Software is      @>
@c  furnished to do so, subject to the following conditions:            @>
@c                                                                      @>
@c      The above copyright notice and this permission notice shall be  @>
@c      included in all copies or substantial portions of the           @>
@c      Software.                                                       @>
@c                                                                      @>
@c      If you copy or distribute a modified version of this Software,  @>
@c      the entire resulting derived work must be given a different     @>
@c      name and distributed under the terms of a permission notice     @>
@c      identical to this one.                                          @>
@c                                                                      @>
@c  The Software is provided ``as is'', without warranty of any kind,   @>
@c  express or implied, including but not limited to the warranties of  @>
@c  merchantability, fitness for a particular purpose and               @>
@c  noninfringement.  In no event shall the authors or copyright        @>
@c  holders be liable for any claim, damages or other liability,        @>
@c  whether in an action of contract, tort or otherwise, arising from,  @>
@c  out of or in connection with the Software or the use or other       @>
@c  dealings in the Software.                                           @>
@c======================================================================@>

@c %**start of header
@setchapternewpage odd
@setfilename pp3.info
@settitle PP3 @value{VERSION}
@documentencoding ISO-8859-1
@c %**end of header

@set VERSION 1.3.2
@set SHORTVERSION 132

@defindex kw
@syncodeindex kw cp

@macro PPTHREE {}
@acronym{PP3}
@end macro

@macro LaTeX {}
@tex
L@kern-.36em%
        {@setbox0=@hbox{T}%
         @vbox to@ht0{@hbox{@sevenrm A}@vss}%
        }%
        @kern-.15em%
        @TeX
@end tex
@ifnottex
La@TeX{}@c
@end ifnottex
@end macro

@macro keyword {name}
@code{\name\}
@end macro

@macro beforerefheading {}
@tex
@penalty-6000@vskip5ex
@end tex
@end macro

@macro afterrefheading {}
@tex
@vskip-8ex@leavevmode
@end tex
@end macro

@macro s {}
@tex
@kern0.1667em%
@end tex
@end macro

@copying
This manual is for @PPTHREE{} (version @value{VERSION}),
which is a celestial charts drawing tool.

Copyright @copyright{} 2003 Torsten Bronger
@t{<}@email{bronger@@users.sourceforge.net}@t{>}.


@quotation
This documentation is free software; you can redistribute it and/or
modify it under the terms of the @acronym{MIT} licence.  Please see the
@t{COPYING} file of the @PPTHREE{} distribution for further information.
@end quotation
@end copying

@finalout
@titlepage
@title PP3
@subtitle drawing beautiful celestial maps
@subtitle version @value{VERSION}
@author Torsten Bronger
@page
@vskip 0pt plus 1filll
@insertcopying
@end titlepage

@dircategory Individual utilities
@direntry
* PP3: (PP3).   Drawing celestial maps.
@end direntry

@iftex
@hyphenation{ca-ta-logue ca-ta-logues}
@end iftex


@ifnottex
@node Top
@top The PP3 program for drawing celestial maps.

@PPTHREE{} generates celestial charts of high (typo)graphical quality.
It uses @LaTeX{} + pstricks for this, so the end formats are
@acronym{EPS} and @acronym{PDF} (in contrast to mere bitmaps).

The program automatically avoids labels that overlap, and you can change
many parameters.  You can place arbitrary text on the map using the
flexibility of the LaTeX language.

@menu
* Introduction::                The ideas behind it.
* Installation::                Some ways to set PP3 up.
* Basic astronomical terms::    Rectascension, declination, and such.
* Usage::                       How to invoke PP3.
* Input scripts::               Telling PP3 what to do.
* Keywords reference::          List of all PP3 keywords.
* Known problems::              List of known shortcomings and bugs.
* Data file formats::           Internal structure of the database files.
* Index::                       General index.
@end menu
@end ifnottex

@c Output the table of the contents at the beginning.
@contents

@ifnottex
@insertcopying
@end ifnottex


@node Introduction
@chapter Introduction


@menu
* What it is::                  Features of PP3.
* What it is not::              Limitations of PP3.
* Successful use of PP3::       Things that have been done using PP3.
@end menu

@node What it is
@section What it is

There are many programs that can create stellar maps.  But none of them
reaches @PPTHREE{}'s typographic and graphical quality.  In contrast to
other programs @PPTHREE{} produces vector images
(e.@s{}g.@:@tie{}@acronym{PDFs}) rather than mere bitmaps.  Therefore it
is perfectly suited for creating illustrations for books or other print
media, and for web pages.

@PPTHREE{} is optimised for the semi-automatic generation of large sets
of sky maps.  It has decent default behaviour, however it can be
customised very flexibly.  It tries to take as much fine-tuning work
away from you as possible.


@node What it is not
@section What it is not

But I must also point out what @PPTHREE{} is @emph{not}.  It cannot help
you to professionally prepare your next observation night, nor is
@PPTHREE{} a visualisation tool for astronomical databases, with pop-up
window information for every sky object on the screen.

In fact, @PPTHREE{} not even has a graphical user interface.  So don't
expect any windows at all, and your mouse will be useless.  Instead,
@PPTHREE{} reads from one file and writes to another file.  (This is
done not only because its author was lazy but because it increases
efficiency, too.)  So, the program itself is quite stinted, but its
results are worth it!


@node Successful use of PP3
@section Successful use of PP3

@unnumberedsubsec Wikipedia

@PPTHREE{} has been used for the celestial maps of all 88 constellations
on @uref{http://@/www.wikipedia.org,Wikipedia}, the free encyclopedia.
Feel free to browse through a
@uref{http://wikipedia.org/w/wiki.phtml?title=List_of_constellations,list
of all constellations}.

This is a web page, so you need bitmaps@footnote{as long as we don't
have @acronym{SVG}}, so a short @uref{http://www.gimp.org,Gimp}
script@footnote{which is included into the distribution} helped me to
convert @PPTHREE{}'s @acronym{EPS} vector output to @acronym{PNG}
bitmaps.  Additionally, this script creates smaller thumbnail version
for all charts that exceed a certain width.

The result is that one can create all maps plus their thumbnails with
one simple command call:

@example
make
@end example

@noindent
Surely it can't become simpler.  You may retort ``Well, but creating the
maps must have been the actual work''.  Of course it was, but first it
took only 10--15 minutes per map eventually, because much work is done
by the default behaviour of @PPTHREE{} itself.  And secondly:

@unnumberedsubsec French Wikipedia

Several months later the @uref{http://fr.wikipedia.org,French division
of Wikipedia} wanted to translate the maps to French.  They wanted
another background colour and French labels and constellation names.
They provided me with a translation table.  It took me three hours to
adjust the scripts, to run @file{make} again, and to upload the
@acronym{ZIP} file with all the demanded bitmaps.

@unnumberedsubsec h2g2

Originally @PPTHREE{} was written for a project on
@uref{http://www.bbc.co.uk/h2g2/guide/,h2g2}, an @emph{edited} Internet
encyclopedia.  Unfortunately the BBC editors wanted very small bitmaps
that would not have been helpful, and they were too lazy to include all
the 88@tie{}bitmaps.  So the project died, but on a smaller scale (for
ten constellations or so), it indeed motivated authors to contribute
articles about constellations.  The maps were externally linked.


@node Installation
@chapter Installation

You can get the latest @PPTHREE{} file releases from
@uref{http://@/sourceforge.net/projects/pp3,@PPTHREE{}'s project page on
Sourceforge}.  The main @PPTHREE{} distribution comes as several files,
namely

@table @file
@item pp3-@var{version}-win.zip
is the complete Windows distribution.

@item pp3-@var{version}-1tb.i386.rpm
is the complete Linux RPM distribution.  (There is also the
corresponding source RPM called @file{pp3-@var{version}-1tb.src.rpm}.)

@item pp3-@var{version}.tar.bz2
is the complete source distribution.

@item pp3-@var{version}-cripple.tar.gz
is a partial source distribution.  Milky Way, Nebulae, and the
@acronym{CWEB} source code are omitted.

@end table

@noindent
Obviously you need only @emph{one} of these files.

@menu
* Windows::                     Installation on Windows.
* Linux::                       Installation on Linux.
@end menu

@node Windows
@section Installation on Windows

Although @PPTHREE{} runs independently from other programs, it is not
useful when it's alone.  It needs two external tools in order to work
properly: @TeX{} and Ghostscript.  @emph{You need not know how to use
@TeX{} and Ghostscript!}

On most Unix/Linux systems @TeX{} and Ghostscript are already installed.
But on Windows, you have to install them yourself.  Fortunately this is
not difficult, and both programs may be useful for other purposes, too.

@menu
* Getting TeX::                 Installing the TeX typesetting engine.
* Getting Ghostscript::         Installing Ghostscript for Postscript
                                  handling.
* Installing PP3::              Finally installing PP3 itself.
@end menu

@node Getting TeX
@subsection Getting @TeX{}

@TeX{} is a mighty typesetter.  @PPTHREE{} calls @TeX{} in order to
actually create the stellar map.  The result is a Postscript file.

There are two major @TeX{} variants for Windows, namely
@uref{http://www.miktex.@/org,Mik@TeX{}} and
@uref{http://www.tug.org/texlive/,@TeX{}@tie{}Live}.  Both are rather
similar in their functionality, and both come with a nice installation
tool.  Please assure that the @t{pstricks} package as part of @TeX{} is
installed, however this is highly probable anyway.


@node Getting Ghostscript
@subsection Getting Ghostscript

The best tool for dealing with Postscript files is
@uref{http://www.cs.wisc.edu/@/~ghost/doc/AFPL/get811.htm,Ghostscript}.
In particular, if you've installed Ghostscript, PP3 is able to generate
PDF files for you.  It is wise (although not necessary) to install
@uref{http://www.cs.wisc.edu/~ghost/gsview/get45.htm,GSView}, too.  It
lets you view arbitrary Postscript files on screen.


@node Installing PP3
@subsection Installation of PP3 itself

When @TeX{} and Ghostscript are in the right place, you finish the
installation by unpacking the @PPTHREE{} @acronym{ZIP} file and copying
its content in the proper directories:

@enumerate
@item
Copy @file{pp3.exe} to an arbitrary directory that is in your
@env{PATH}.

@item
Copy all the other files to @emph{one single} arbitrary directory.  Then
set the environment variable @env{PP3DATA} to this directory.

@end enumerate

For the sake of simplicity, I recommend to copy everything to
@file{C:\Programs\pp3} and to set your @env{PATH} environment variable
to

@display
@code{@var{old PATH};C:\Programs\pp3}
@end display

@noindent
and to set the @env{PP3DATA} environment variable to
@file{C:\Programs\pp3}.  That's it.


@node Linux
@section Installation on Linux

@menu
* RPM installation::            The simple way.
* Building from sources::       The hard way.
@end menu

Before you install @PPTHREE{}, ensure that @TeX{} and Ghostscript are
installed.


@node RPM installation
@subsection @acronym{RPM} installation

You should consider to use the @acronym{RPM} file, because it is the
simplest installation.  It works for SuSE Linux and probably also for
Red@s{}Hat.  Just enter (as root)

@display
@code{rpm -i @var{RPM-file-name}}
@end display

@noindent
That's it.


@node Building from sources
@subsection Building from sources

(Actually you can compile the sources on Windows, too (of course), but
since most people who do compile are Linux users, I dare to put it in
the Linux section.)

@PPTHREE{} is written in @acronym{CWEB}@.  This is special form of C++
and can be transformed to real C++ trivially.  You only need the
@uref{http://www-cs-faculty.stanford.edu/@/~knuth/cweb.html,@acronym{CWEB}
programs} installed.  For your convenience the C++ code of @PPTHREE{} is
included into the source distribution, so you need @acronym{CWEB} only
if you want to modify the program.

There is no @file{configure} script.  Just call @code{make} and (as
root) @code{make install}.  Before that, you may want to adjust some
paths in the @file{Makefile}.

@PPTHREE{} looks for its data files (all files with the @file{.dat}
extension) in a special directory that is pre-compiled in the
executable.  The Makefile assures that this is the correct one, but you
can override that with the environment variable @env{PP3DATA}.


@node Basic astronomical terms
@chapter Basic astronomical terms

The following is a mere crash course.  It is supposed to enable you to
use @PPTHREE{} even if you have not the slightest idea about how
astronomers describe the sky.

Readers competent in astronomy may skip it, although
@ref{Constellations} and @ref{Catalogues} contain minor program
peculiarities, too.

@menu
* Celestial coordinate system::  Rectascension and declination.
* Magnitudes::                  Stellar brightnesses.
* Constellations::              Constellations and their boundaries.
* Catalogues::                  How to name one particular sky
                                  object properly.
@end menu


@node Celestial coordinate system
@section Celestial coordinate system

On a sheet of paper, every point has an @math{x} and a @math{y}
coordinate (if you draw two axes).  On planet Earth, every location has
a @emph{longitude} and a @emph{latitude}.

With a very similar system astronomers give the coordinates of every
point in the sky.  The sky longitude is called @emph{rectascension} and
the sky latitude is called @emph{declination}.  There is a sky North
Pole (near the Polar Star), a sky South Pole, and a sky equator.  You
can make globes of the sky like of the Earth, with the only difference
that you must imagine being @emph{inside} the globe.

So the rectascension is the @math{x} coordinate in a way.  It is given
in `hours' (h) from 0@dmn{h} to 24@dmn{h}.  Since the sky is round, both
0@dmn{h} and 24@dmn{h} are the same rectascension, and 12@dmn{h} is the
opposite to it.

Usually the fraction of the rectascension that is smaller than 1@dmn{h}
is given in minutes and seconds, however in @PPTHREE{} the rectascension
is one decimal fraction number.

The declination corresponds to the @math{y} coordinate.  It is measured
from @math{-90^\circ} (South Pole) over @math{0^\circ} (equator) to
@math{+90^\circ} (North Pole).


@node Magnitudes
@section The system of magnitudes

Theoretically you could measure the brightness of stars in Watts like
the power of a light bulb.  But this is rather awkward.  Instead,
astronomers use the system of @emph{magnitudes}@tie{}(m).

The brighter a star, the smaller is its magnitude.  Sirius is the
brightest star in the sky, and its brightness is @math{-1.6}@dmn{m}.
Vega has a brightness of @math{0.0}@dmn{m}, and Polaris, the Pole Star,
of @math{2.0}@dmn{m}.  The faintest stars that you can see with the
naked eye in a very clear sky have @math{6}@dmn{m}.

The faintest stars in the standard catalogue of @PPTHREE{} are of
approx.@tie{}@math{7}@dmn{m}, however extremely good terrestrial
telescopes can see up to @math{22}@dmn{m}.


@node Constellations
@section Constellations

Since the 1930s, the sky is officially divided into 88 constellations.
At that time, the boundaries between the constellations were clearly
defined, too: namely by the coordinates of sky points that, when
connected with their respective neighbours, create the boundaries.

Every constellation has a Latin name and a three letter abbreviation.
For example ``Orion -- Ori'', or ``Ursa Major -- UMa'' (Great Bear), or
``Hydrus -- Hyi'' (Male Water Snake).  This abbreviation plays a big
role in @PPTHREE{} because it's the only way to denote a constellation.
You must use only uppercase letters in the abbreviation.

One constellation, the snake or ``Serpens'', is divided into two parts,
``Serpens Caput'' (Head) and ``Serpens Cauda'' (Tail).  They are
abbreviated @code{SER1} and @code{SER2} in @PPTHREE{}.  If you say
@code{SER} only, you mean both parts.


@node Catalogues
@section Catalogues: Flamsteed, Henry Draper, NGC/IC and Messier

When you use @PPTHREE{} you have to tell the program e.@s{}g.@: which
star you want to delete from the map or which nebula shall get a
different label.  For this, every sky object must have a distinct name
in @PPTHREE{}.

By and large there are two kinds of objects in the sky: stars and
nebulae.  Astronomers have created many catalogues of them.  There are
two star catalogues and three nebulae catalogues supported in
@PPTHREE{}.

@menu
* Denoting stars::              How stars get a name in PP3.
* Denoting nebulae::            How nebulae get a name in PP3.
@end menu

@node Denoting stars
@subsection Denoting stars

The two star catalogues are the Flamsteed and the Henry Draper
(@acronym{HD}) numbers.  Flamsteed gave numbers beginning with `1' to
stars in each constellation.  The Flamsteed catalogue is small and
doesn't contain the complete southern sky.  In contrast to that, the
@acronym{HD} catalogue doesn't distinguish between constellations, it
covers the whole sky, and also contains faint stars.  However the
@acronym{HD} names are harder to read.

For example Rigel, @math{\beta}@tie{}Ori, can be identified in
@PPTHREE{} with either

@example
ORI 19
@end example

@noindent
where `@code{ORI}' is Rigel's constellation (Orion) and `@code{19}' the
Flamsteed number; or with

@example
HD 34085
@end example

@noindent
where `@code{34085}' is Rigel's Henry Draper catalogue number.  Both are
totally equivalent.  The program
@uref{http://@/www.@/shatters.@/net/@/celestia/,Celestia} is very useful
for finding Flamsteed or @acronym{HD} numbers.


@node Denoting nebulae
@subsection Denoting nebulae

The two nebula catalogues @acronym{NGC} and @acronym{IC} are
complementary, i.@s{}e.@: they don't have@footnote{well, shouldn't have}
any nebulae in common.  For example, the North America Nebula is called
`@code{NGC 7000}' and the Orion Nebula is '@code{NGC 1976}'.  The
@acronym{IC} catalogue usually contains fainter objects.

Parallel to that there is the much older and much smaller Messier
catalogue, abbreviated@tie{}`M'.  For example, the Orion Nebula can also
be called '@code{M 42}', whereas the North America Nebula isn't included
in Messier's catalogue.

Pay attention to

@itemize
@item
the catalogue abbreviation in all uppercase and

@item
the space between the catalogue abbreviation and the number.
@end itemize


@node Usage
@chapter Usage

@menu
* Invocation::                  Starting PP3.
* Using pipes::                 If you really need pipes for some
                                  reason.
@end menu

@node Invocation
@section Starting PP3

Invoking @PPTHREE{} is very straightforward.  Since it is a command line
program you only have to call it somehow and give a so-called input
script as the parameter, see @ref{Input scripts}.  For example, entering

@example
pp3 orion.pp3
@end example

@noindent
on the command line starts @PPTHREE{} and lets it generate the file
@file{orion.pdf}, which is a @acronym{PDF} file with a star map of
Orion.  You can view this @acronym{PDF} with Acrobat Viewer, convert it
to a bitmap, or you can embed it into a text of yours.

To be honest, there are three possible output formats.  By default,
@PPTHREE{} generates a @LaTeX{} file in the current directory.  But most
people cannot do much with it, therefore certain commands in the input
script trigger @acronym{EPS} or @acronym{PDF} output.

@PPTHREE{} can't generate bitmaps.  If you need bitmaps you must use a
bitmap program (e.@s{}g.@: Corel Draw or the
@uref{http://www.gimp.org,Gimp}) for that.


@node Using pipes
@section Using pipes

Especially on Unix it is very common to read from standard input and to
write to standard output.  I don't think that this is sensible for
@PPTHREE{}, but anyway, I included this facility.  If you give
`@code{-}' as the only parameter, @PPTHREE{} reads the input script from
standard input, and if you don't give an output filename in the input
script (@pxref{Input scripts}), @PPTHREE{} writes to standard output.



@node Input scripts
@chapter Writing input scripts

@menu
* Minimal example::             The first four PP3 lines.
* More bells and wistles::      How to make it look more sophisticated.
@end menu


@node Minimal example
@section Minimal example input script

The minimal @PPTHREE{} input script is -- well -- the empty file.  Then
@PPTHREE{}'s default values create a dark blue star map of Orion.  You
can override these defaults step by step.  Let's do so: Write

@example
# Cygnus, the Swan

filename output swan.tex
switch pdf_output on

set center_rectascension  19.95
set center_declination    40.8
@end example

@noindent
to the file @file{swan.pp3} and call

@example
pp3 swan.pp3
@end example

@noindent
The result is a file @file{swan.pdf} in the current directory with a
star map of the Swan.

The lines of @file{swan.pp3} are not difficult to explain:  The very
first line is a comment.  Everything that starts with a @code{#} is a
comment.  You can write descriptive text in them to make the file more
readable.

The line

@example
filename output swan.tex
@end example

@noindent
makes @PPTHREE{} to write the generated map to the file
@file{swan.tex}.  But such a file is rarely the desired output.
Therefore the next line

@example
switch pdf_output on
@end example

@noindent
tells @PPTHREE{} that we want to have a @acronym{PDF} file.  So
@PPTHREE{} does everything necessary for that.  And finally,

@example
set center_rectascension  19.95
set center_declination    40.8
@end example

@noindent
denotes the area of the sky that we want to be displayed.  Both values
indicate the celestial point that we want to have in the centre of the
map.  In this case, 19.95@dmn{h} rectascension and @math{+40.8^\circ}
declination which is the centre of the constellation Swan.


@node More bells and wistles
@section More bells and wistles


@node Keywords reference
@chapter Keywords reference
@cindex keywords

On @uref{http://sf.net/projects/pp3,@PPTHREE{}'s project page} you can
download a neat reference card.  If you fold it twice it is a handy
zigzag.

@menu
* General structure::           
* Parameters::                  
* Objects and Labels::          
* LaTeX preamble::              
@end menu

@node General structure
@section General structure


@node Parameters
@section Setting Parameters



@menu
* Essential parameters::        
* Switching things on or off::  
* Filtering stars and nebulae by their brightness::  
* Colour::                      
* Penalties::                   
* Filenames::                   
@end menu

@node Essential parameters
@subsection Essential parameters


@menu
* View control::                
* Output control::              
* Implementing a global style::  
* Highlighted constellation::   
@end menu

@node View control
@subsubsection Map view, scale, and size
@kwindex set
@kwindex center_rectascension
@kwindex center_declination
@kwindex box_width
@kwindex box_height
@kwindex grad_per_cm


set center_rectascension

set center_declination

set box_width

set box_height

set grad_per_cm


@node Output control
@subsubsection Setting what file should be created

filename output

switch eps_output

switch pdf_output


@node Implementing a global style
@subsubsection Implementing a global style

filename include

filename latex_preamble


@node Highlighted constellation
@subsubsection The highlighted constellation

set constellation


@node Switching things on or off
@subsection Switching things on or off


switch milky_way

switch nebulae

switch grid

switch ecliptic

switch boundaries

switch constellation_lines

switch labels

switch colored_stars


@node Filtering stars and nebulae by their brightness
@subsection Filtering stars and nebulae by their brightness

set faintest_cluster_magnitude

set faintest_diffuse_nebula_magnitude

set faintest_star_magnitude

set faintest_star_with_label_magnitude

set faintest_star_disk_magnitude

set minimal_star_radius


@node Colour, line style, and other layout
@subsection Colour, line style, and other layout

@menu
* Colours::                     
* Line widths::                 
* Line styles::                 
* Other layout parameters::     
@end menu

@node Colours
@subsubsection Colours

color background

color grid

color ecliptic

color boundaries

color highlighted_boundaries

color constellation_lines

color milky_way

color nebulae

color stars

color labels

color text_labels


@node Line widths
@subsubsection Line widths

line_width grid

line_width ecliptic

line_width boundaries

line_width highlighted_boundaries

line_width nebulae

line_width constellation_lines


@node Line styles
@subsubsection Line styles

line_style grid

line_style ecliptic

line_style boundaries

line_style highlighted_boundaries

line_style nebulae

line_style constellation_lines


@node Other layout parameters
@subsubsection Other layout parameters

set shortest_constellation_line

set label_skip

set minimal_nebula_radius

set star_scaling

set fontsize


@node Penalties
@subsection Penalties

penalties stars

penalties labels

penalties nebulae

penalties boundaries

penalties boundaries_rim

penalties constellation_lines

penalties constellation_lines_rim

penalties threshold

penalties rim


@node Filenames
@subsection Filenames

filename stars

filename nebulae

filename label_dimensions

filename constellation_lines

filename boundaries

filename milky_way


@node Objects and Labels
@section Setting or deleting celestial objects and their labels


@node LaTeX preamble
@section LaTeX preamble


@node Known problems
@chapter Known problems


@node Data file formats
@appendix Data file formats

Maybe you want to use you own data bases with @PPTHREE{}.  If they are
not too large@footnote{Unfortunately @PPTHREE{} still has the
disadvantageous behaviour of reading the @emph{whole} data base file.}
you may well do so.  Of course, then you need to know the internal
structure of the files.  Although they are so simple that reverse
engineering should be almost trivial, you find here a complete
description of all of them.

Additionally I will give detailed information where the original data of
@PPTHREE{}'s standard distribution came from.

The last point, the ``label dimensions file'', isn't a real data base
file, but an internal temporary file.  It is mentioned here just for
completeness.

@menu
* Stars data file::             The stars database.
* Nebulae data file::           Galaxies, dust clouds, and such.
* Lines data file::             The purely subjective constellation
                                  lines.
* Boundaries data file::        The boundaries between constellations.
* Milky Way data file::         The Milky Way brightness bitmap.
* Label dimensions file::       Typographic dimensions of all labels.
@end menu

@node Stars data file
@section Stars data file

This is a text file usually called @file{stars.dat}.  Four consecutive
lines belong together and refer to one particular star.  There is no
header.

@table @asis
@item Line 1
A row with seven fields separated by whitespace:

@enumerate
@item
Henry Draper Catalogue number (`@code{0}' if unknown),

@item 
BSC catalogue number (`@code{0}' if unknown),

@item
rectascension in hours,

@item
declination in degrees,

@item
visual brightness in magnitudes,

@item
B@minus{}V brightness in magnitudes (`@code{99.0}' if unknown), and

@item
Flamsteed number (`@code{0}' if unknown).

@end enumerate

@item Line 2
The label (astronomical name) for the star, as a @LaTeX{}-ready string,
e.@s{}g.@: ``@code{$\alpha$}'', ``@code{$\phi^@{2@}$}'', or simply
``@code{$23$}''.  May be the empty string.

@item Line 3
The astronomical abbreviation of the constellation.  It must be all
uppercase.

@item Line 4
The spectral class.  It must start with the spectral class letter,
followed by the fraction digit, followed by the luminosity class as a
Roman number, e.@s{}g.@: ``@code{F5III}''.  Anything may follow as in
``@code{K2-IIICa-1}'', however the mandatory parts must not contain any
whitespace.

@end table

@subheading Example

@smallexample
358 15 0.139805 29.0906 2.06 -0.11 21
$\alpha$
AND
B8IVpMnHg
11636 553 1.91067 20.8081 2.64 0.13 6
$\beta$
ARI
A5V
886 39 0.220611 15.1836 2.83 -0.23 88
$\gamma$
PEG
B2IV
@end smallexample


@subheading @PPTHREE{}'s star data origin

It's the Bright Stars Catalogue (@acronym{BSC}) as distributed with the
program @uref{http://www.stargazing.net/astropc/,Cartes du Ciel}.  It
contains almost 10,000@tie{}stars.  I corrected minor mistakes and let
all double stars collapse, i.@s{}e.@: their visual brightnesses were
summed up and the respective minor partner was removed from the file.


@node Nebulae data file
@section Nebulae data file

This is a text file usually called @file{nebulae.dat}.  There is no
header.  The file is just a whitespace separated stream of numbers and
constellation abbreviations.  In order to make it more readable though,
the standard @PPTHREE{} nebulae file has every nebula on one single line
of its own.

Each dataset has the following eleven fields:

@enumerate
@item
@acronym{NGC} catalogue number (`@code{0}' is not listed there),

@item
@acronym{IC} catalogue number(`@code{0}' is not listed there),

@item
Messier Catalogue number(`@code{0}' is not listed there),

@item
The astronomical abbreviation of the constellation.  It must be all
uppercase.

@item
rectascension in hours,

@item
declination in degrees,

@item
visual brightness in magnitudes,

@item
large diameter in degree minutes,

@item
small diameter in degree minutes (must be equal to the large diameter if
unknown),

@item
the horizontal angle if the large diameter in degrees (`@code{720.0}' if
unknown), and

@item
the type of the nebula: 0:@tie{}unknown, 1:@tie{}galaxy,
2:@tie{}emission nebula, 3:@tie{}reflection nebula, 4:@tie{}open star
cluster, and 5:@tie{}globular star cluster.

@end enumerate

@subheading Example

@smallexample
1 0 0 PEG 0.121083 27.7089 13.6 0.0283333 0.02 -30 1
2 0 0 PEG 0.121417 27.6786 15 0.0166667 0.01 -22 1
3 0 0 PSC 0.121333 8.30139 14.4 0.0183333 0.01 -21 1
4 0 0 PSC 0.123472 8.37389 16.9 0.01 0.005 55 1
5 0 0 AND 0.130222 35.3628 14.8 0.02 0.0116667 -25 1
6 0 0 AND 0.159056 33.3089 14.1 0.0283333 0.0266667 -50 1

1976 0 42 ORI 5.58808 -5.39028 4 1.08333 1 720 2
3034 0 82 UMA 9.93167 69.6831 9.2 0.186667 0.0716667 25 1
7000 0 0 CYG 20.9806 44.5167 4 2 1.66667 720 2
@end smallexample

@subheading @PPTHREE{}'s nebulae data origin

It's the @acronym{NGC}/@acronym{IC} catalogues as compiled by
@uref{http://www.ngcic.com/@/steinicke/,Wolfgang Steinicke}.


@node Lines data file
@section Constellation lines data file

This is a text file usually called @file{lines.dat}.  It has no header.
You can define paths of constellation lines by lists of stars that are
ended with a semicolon@tie{}`@code{;}'.  You can insert superfluous
whitespace as you wish, and comments after every@tie{}`@code{#}'.

Stars are given in the usual way: Either by a pair of constellation
abbreviation and Flamsteed number, as in

@example
ORI 19
@end example

@noindent
(Rigel), or by `@code{HD}' and the Henry Draper catalogue number, as in

@example
HD 108248
@end example

@noindent
(Acrux).

@subheading Example

@smallexample
# Orion

ORI 19  ORI 34  ORI 24 ;
ORI 53  ORI 50  ORI 46  ORI 34 ;
ORI 50  ORI 58 ;

# Southern Cross

HD 111123  # beta Cru
HD 106490 ; # delta Cru

HD 108248  # alpha Cur
HD 108903 ;  # gamma Cru
@end smallexample

@subheading @PPTHREE{}'s constellation lines origin

I created the lines after my fancy.  The @emph{Atlas f@"ur
Himmelsbeobachter}@footnote{in German; @acronym{ISBN}@tie{}3440074889}
was an important source of inspiration though.


@node Boundaries data file
@section Boundaries data file

It doesn't make much sense to use an own boundaries file, unless you
want to use a different equinox, but anyway.  This is a text file
usually called @file{boundaries.dat}.  It has no header.

The file is a sequence of elementary line segments.  Every segment is a
whitespace separated sequence of entries.  The entries for each segment
are:

@enumerate
@item
Number of points @math{n_1} in the segment.

@item
Repeated @math{n_1} times:

@enumerate
@item
rectascension of point in hours,
@item
declination of point in
degrees.
@end enumerate

@item
Number of constellations @math{n_2} touching this border line (is
always@tie{}2, however it hasn't always been due to flawed raw data).

@item
Repeated @math{n_2} times: All uppercase astronomical abbreviation of
the adjacent constellation. It may distinguish between @code{SER1} and
@code{SER2} for Serpens Caput and Serpens Cauda.

@end enumerate

@subheading Example

@smallexample
3 20.63865 2.43608 20.63929 1.43613 20.63992 0.43617 2 AQL AQR
10 20.63992 0.43617 20.64055 -0.56377 20.64118 -1.56373
  20.64181 -2.56368 20.64245 -3.56364 20.64308 -4.56359 20.64372 -5.56355
  20.64435 -6.56350 20.64500 -7.56346 20.64564 -8.56341 2 AQL AQR
9 17.71838 -67.57110 17.65152 -67.58319 17.58465 -67.59526
  17.51772 -67.60731 17.45076 -67.61933 17.38378 -67.63130 17.31676 -67.64324
  17.24970 -67.65515 17.21616 -67.66108 2 ARA APS
@end smallexample

@subheading @PPTHREE{}'s boundary data origin

It's the @uref{ftp://cdsarc.u-strasbg.fr/cats/@/VI/49/,Catalogue of
Constellation Boundary Data} by Davenhall and Leggett.  I had to fix
some bugs though, because the Ophiuchus/Serpens region was flawed.
Additionally, the original data has peculiarities because it tries to be
useful for bounded maps, e.@s{}g.@: in Mercator projection.  I removed
the resulting spurious lines.


@node Milky Way data file
@section Milky Way data file

This is a text file usually called @file{milkyway.dat}.

Its header is extremely simple: It consists of only one number which is
the maximal (=@tie{}equatorial) diagonal half distance of two pixels in
degrees. This value is used as the radius for the milky way pixels.  Of
course it must be the minimal radius for which there are no gaps between
the pixels.

What follows are the Milky Way pixels themselves.  Each consists of tree
entries, separated by white space:

@enumerate
@item
The rectascension in hours,

@item
the declination in degrees, and

@item
the grey value of the pixel from 1@tie{}to@tie{}255.  Zero is not used
because zero-value pixels are not included into the data file anyway.
@end enumerate


@subheading Example

@smallexample
0.212
11.885 0.259 1
11.962 0.295 5
11.974 0.298 5

17.982 -26.999 136
17.982 -27.299 158
17.982 -27.599 169
17.982 -27.899 199
17.981 -28.199 235
@end smallexample


@subheading @PPTHREE{}'s boundary data origin

I used the
@uref{http://home.arcor-online.de/axel.@/mellinger/,@emph{All-Sky Milky
Way Panorama}} by Axel Mellinger.  His bitmap with the two hemispheres
in equidistant azimuthal projection were greyscaled and smoothed with
the Gimp, and then transformed to @PPTHREE{}'s format with a small
hand-written C program.


@node Label dimensions file
@section Label dimensions file

This file is never user provided but generated by @PPTHREE{} itself in
order to store typographic dimensions of all labels.  Highly probably
you needn't know its structure.

Every labels has two lines in the file:

@table @asis
@item Line 1
The label itself in @LaTeX{} form.

@item Line 2
The typographic width, height, and depth of the label in centimetres,
separated by whitespace.

@end table

@subheading Example

@smallexample
$10$~\footnotesize UMa
0.97106 0.23043 0.00253
$\omega$
0.34197 0.17081 0.00000
10 UMa
1.11657 0.23389 0.00316
47 Tuc
0.94506 0.23389 0.00316
Pleiades
1.20865 0.24777 0.00316
\FlexLabel@{Andromeda@}
1.86061 0.25076 0.00316
\FlexLabel@{Antlia@}
0.93945 0.25076 0.00316
@end smallexample




@node Index
@unnumbered Index

@iftex
All @PPTHREE{} keywords are printed in @t{typewriter} style.
@end iftex

@printindex cp

@bye


@c  LocalWords:  texinfo def rmdefault ppl mathrel mskip pstexinfo texi bronger
@c  LocalWords:  Exp PPTHREE tex hbox vbox sevenrm vss ifnottex vskip filll EPS
@c  LocalWords:  leavevmode dircategory direntry iftex logue logues pstricks
@c  LocalWords:  PDF Rectascension PDFs emph uref noindent rectascension dmn
@c  LocalWords:  circ Ori UMa Hyi Cauda NGC Celestia itemize var Mik GSView SVG
@c  LocalWords:  exe env rpm dat pdf Corel pxref asis BSC IIICa IVpMnHg eps
@c  LocalWords:  ARI Cartes Ciel PSC CYG Steinicke Himmelsbeobachter AQL AQR
@c  LocalWords:  Davenhall Leggett otnotesize Tuc FlexLabel Acrux
